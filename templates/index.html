<!doctype html>
<script>
    function send_prog(){
        var text = document.getElementsByName('text')[0].value;
        fetch("/dig", {method: "POST", body: JSON.stringify(text)})
        .then(response => response.json())
        .then(data => document.getElementsByName('id')[0].value = data);
    };
    function update_result(){
        var id = document.getElementsByName('id')[0].value;
        fetch("/dig/id"+id, {method: "GET"})
        .then(response => response.json())
        .then(data => document.getElementsByName('result')[0].value = data);
        setTimeout(update_result, 5000);
    };
    // function retrive_result(){
    //     var id = document.getElementsByName('id')[0].value;
    //     fetch("/dig/"+id, {method: "GET"})
    //     .then(response => response.json())
    //     .then(data => document.getElementsByName('result')[0].value = data);
    // };
    setTimeout(update_result, 5000);
</script>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div>
        <textarea name="text" cols="40" rows="5"></textarea>
    </div>
    <div>
        <button onclick="send_prog()">Submit trace</button>
    </div>
    <div>
        <textarea name="id" cols="40" rows="5" readonly></textarea>
    </div>
    <div>
        <textarea name="result" cols="40" rows="5" readonly></textarea>
    </div>
</body>
</html>